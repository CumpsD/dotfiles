---
- name: Install Xorg
  pacman:
    name: [
        'xorg-server',
        'xorg-xrandr',
        'xorg-xrdb']
    state: latest

- name: Install Intel Video Driver
  pacman:
    name: [
        'xf86-video-intel',
        'mesa']
    state: latest

- name: Install SDDM
  pacman:
    name: [
        'sddm']
    state: latest

- name: Enable SDDM SystemD service
  systemd:
    name: sddm
    enabled: yes
    masked: no

- name: Install Aerial theme dependencies for SDDM
  pacman:
    name: [
        'gst-libav',
        'phonon-qt5-gstreamer',
        'gst-plugins-good',
        'qt5-multimedia',
        'qt5-quickcontrols',
        'qt5-graphicaleffects']
    state: latest

- name: Clean Aerial theme folder
  file:
    state: absent
    path: "/usr/share/sddm/themes/aerial-sddm-theme"

- name: Install Aerial theme for SDDM
  become: true
  git:
    repo: https://github.com/CumpsD/aerial-sddm-theme.git
    dest: /usr/share/sddm/themes/aerial-sddm-theme
    version: 371ff39fd0338ab61e261a27ba3ab17ec22023f8

- name: Install Sound
  pacman:
    name: [
        'pulseaudio',
        'pulseaudio-alsa',
        'alsa-utils',
        'alsa-plugins',
        'alsa-lib',
        'alsa-firmware',
        'mpd',
        'mpc',
        'ncmpcpp',
        'playerctl',
        'gstreamer',
        'gst-plugins-good',
        'gst-plugins-bad',
        'gst-plugins-ugly',
        'gst-plugins-base']
    state: latest

- name: Install WM and tools
  pacman:
    name: [
        'bspwm',
        'sxhkd',
        'xdo',
        'stalonetray',
        'compton',
        'rofi',
        'dunst',
        'network-manager-applet',
        'volumeicon',
        'rxvt-unicode',
        'urxvt-perls',
        'xsel',
        'xclip',
        'thunar',
        'feh',
        'xsettingsd',
        'wireless_tools',
        'imagemagick',
        'bc',
        'scrot',
        'viewnior',
        'chromium',
        'pepper-flash',
        'ttf-liberation']
    state: latest

- name: Install WM and tools (AUR)
  become: yes
  become_user: aur_builder
  aur:
    use: yay
    name: [
        'lemonbar-git',
        'clipit',
        'i3lock-color',
        'betterlockscreen',
        'chromium-widevine',
        'visual-studio-code-bin',
        'msbuild-stable',
        'jetbrains-toolbox']

# TODO: Make sure Flash is allowed to run in chrome://settings/content/flash.
# TODO: Make sure Allow sites to play protected content is checked in chrome://settings/content/protectedContent.
# TODO: To enable Do Not Track, visit chrome://settings, scroll down to Advanced and under Privacy and security, check Send a "Do Not Track" request with your browsing traffic.

- name: Install Fonts
  pacman:
    name: [
        'ttf-dejavu',
        'ttf-droid',
        'ttf-roboto',
        'noto-fonts']
    state: latest

- name: Install Themes
  pacman:
    name: [
        'gtk-engine-murrine',
        'arc-gtk-theme',
        'arc-icon-theme',
        'numix-gtk-theme']
    state: latest

- name: Install Themes (AUR)
  become: yes
  become_user: aur_builder
  aur:
    use: yay
    name: [
        'arc-firefox-theme-git',
        'arc-colors-revival',
        'numix-circle-icon-theme-git',
        'numix-icon-theme-git',
        'luv-icon-theme-git',
        'paper-icon-theme-git']
